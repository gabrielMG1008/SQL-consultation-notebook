-- EXAMPLE – SINGLE-ROW SUBQUERY
SELECT NM_FUNCIONARIO,
       VL_SALARIO_MENSAL
  FROM T_SIP_FUNCIONARIO
WHERE VL_SALARIO > (
                     SELECT VL_SALARIO_MENSAL
                       FROM T_SIP_FUNCIONARIO
                     WHERE NR_MATRICULA = 12348
);


-- EXAMPLE – SINGLE-ROW SUBQUERY, WITH GROUP FUNCTIONS
SELECT F.NM_FUNCIONARIO,
       F.VL_SALARIO_MONSAL
  FROM T_SIP_FUNCIONARIO F
WHERE F.VL_SALARIO > (
                       SELECT AVG(F.VL_SALARIO_MENSAL)
                         FROM T_SIP_FUNCIONARIO F
);


-- EXAMPLE – SINGLE-ROW SUBQUERY, WITH GROUPING, GROUP FUNCTIONS, AND HAVING
SELECT CD_DEPTO,
       MIN(VL_SALARIO_MENSAL)
  FROM T_SIP_FUNCIONARIO
GROUP BY CD_DEPTO
  HAVING MIN(VL_SALARIO_MENSAL) > (
                                    SELECT MIN(VL_SALARIO_MENSAL)
                                      FROM T_SIP_FUNCIONARIO
                                     WHERE CD_DEPTO = 3
);


-- EXAMPLE – SINGLE-LINE SUBQUERY, WITH FROM CLAUSE
SELECT F.NR_MATRICULA,
       F.NM_FUNCIONARIO,
       F.DT_ADMISSAO,
      RESFUNC.QTDEALOCACAO
FROM T_SIP_FUNCIONARIO F,
                    (
                       SELECT NR_MATRICULA,
                                 COUNT(NR_MATRICULA) QTDEALOCACAO
                          FROM T_SIP_IMPLANTACAO
                      GROUP BY NR_MATRICULA
                      ) RESFUNC
WHERE F.NR_MATRICULA = RESFUNC.NR_MATRICULA;


-- EXAMPLE – SUBQUERY WITH MULTIPLE LINES, WITH IN OPERATOR
SELECT CD_IMPLANTACAO ,
       CD_PROJETO ,
       NR_MATRICULA "FUNCIONARIO"
  FROM T_SIP_IMPLANTACAO
WHERE CD_PROJETO IN
                   (
                     SELECT CD_PROJETO
                      FROM T_SIP_PROJETO
                     WHERE TO_CHAR(DT_INICIO,'MM/YYYY') IN('04/2012','10/2013')
);


-- EXAMPLE – CORRELATED SUBQUERY, WITH EXISTS
SELECT F.NR_MATRICULA,
       F.NM_FUNCIONARIO
FROM T_SIP_FUNCIONARIO F
WHERE EXISTS
            (
              SELECT I.NR_MATRICULA
                FROM T_SIP_IMPLANTACAO I
               WHERE F.NR_MATRICULA=I.NR_MATRICULA
);


